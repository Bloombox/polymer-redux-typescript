<head>
    <link rel="import" href="../decorators.html">
    <link rel="import" href="../../bower_components/polymer/polymer-element.html">
    <link rel="import" href="../../bower_components/iron-list/iron-list.html">
    <link rel="import" href="../../bower_components/iron-scroll-threshold/iron-scroll-threshold.html">
    <link rel="import" href="../../bower_components/paper-item/paper-item.html">
    <link rel="import" href="../../bower_components/paper-button/paper-button.html">


    <link rel="import" href="../ozone-item-api/ozone-item-api.html">
    <link rel="import" href="../ozone-item-preview/ozone-item-preview.html">
    <link rel="import" href="../ozone-item-view/ozone-item-view.html">
    <link rel="import" href="../ozone-collection/ozone-collection.html">
    <link rel="import" href="../ozone-item-view-factory/ozone-item-view-factory.html">

</head>
<body>
<dom-module id="ozone-mosaic">
    <template>
        <style>
            iron-scroll-threshold {
                top: 10vh;
                left: 25vh;
                right: 25vh;
                height: 40vh;
                text-align: center;
                box-shadow: 0 0 60px rgba(0,0,0,0.5);
            }
            .loader {
                background-color: #0b8043;
                text-align: center;
                height: 44px;
                font: 13px arial;
                line-height: 44px;
                color: white;
            }
            .resultList {
            }
            .resultListItem {
            }

        </style>
        <ozone-item-api collection="item" id="ozoneApi"></ozone-item-api>
        <ozone-type-api collection="item" id="ozoneApiType"></ozone-type-api>
        <ozone-collection
                id="mosaicCollection"
                items="{{items}}"
                total="{{total}}"
                data-remain="{{dataRemain}}"
                source-id="ozoneApi"></ozone-collection>

        <div hidden$="[[!items.length]]">
        <iron-scroll-threshold id="scrollTheshold" on-lower-threshold="toggleThreshold"  >
            <div class="resultList">
            <iron-list scroll-target="scrollTheshold" items="[[items]]"selected-item="{{selectedItem}}" selection-enabled>
                <template>
                    <ozone-item-preview  item-id="[[item.id]]" item-data="[[item]]" class="resultListItem"></ozone-item-preview>
                </template>
            </iron-list>
            <paper-item class="loader" hidden$="[[!dataRemain]]">Fetching new items...</paper-item>
            </div>
        </iron-scroll-threshold>
        </div>
        <ozone-item-view-factory item="[[selectedItem]]"></ozone-item-view-factory>
    </template>
    <script src="ozone-mosaic.js"></script>
</dom-module>
</body>