<head>
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=no">

    <link rel="import" href="../../bower_components/polymer/polymer-element.html">
    <link rel="import" href="../../bower_components/iron-list/iron-list.html">
    <link rel="import" href="../../bower_components/iron-scroll-threshold/iron-scroll-threshold.html">
    <link rel="import" href="../../bower_components/paper-item/paper-item.html">
    <link rel="import" href="../../bower_components/paper-button/paper-button.html">
    <link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">


    <link rel="import" href="../decorators.html">
    <link rel="import" href="../ozone-item-api/ozone-item-api.html">
    <link rel="import" href="../ozone-item-preview/ozone-item-preview.html">
    <link rel="import" href="../ozone-collection/ozone-collection.html">

</head>
<body>
<dom-module id="ozone-mosaic">
    <template>
        <style>
            :host {
                display: block;
                --loader-color: {
                    background-color: #585185;
                    color: white;
                };
                --details-panel-background-color: {
                     background:#FAFAFA;
                };
                --save-button-colors: {
                    background: #2C2958;
                    color:white;
                }
                --actions-icon-color: {
                    color:#2C2958;
                }
                --details-panel-shade: {
                    background:rgba(0,0,0,0.42);
                }
                --actions-background-color: {
                    background: #fafafa;
                }
            }
            .loader {
                @apply --loader-color;
                position:relative;
                bottom:0;
                left:0;
                right:0;
                text-align: center;
                height: 44px;
                font-family:'Roboto', sans-serif;
                font-size: 13px;
                line-height: 44px;
                margin:0 -10px -10px;
            }
            iron-list {
                 margin-top: 90px;
                 padding-bottom: 16px;
             }
            .resultList{
                width:100%;
                height:100%;
            }

            @media (max-width: 400px) {
                iron-list {
                    margin-top: 72px;
                }
            }

        </style>
        <ozone-collection
                id="mosaicCollection"
                items="{{searchResults}}"
                total="{{total}}"
                data-remain="{{dataRemain}}"></ozone-collection>

        <div hidden$="[[!searchResults.length]]">

            <div class="resultList" id="resultList">
            <iron-list
                    id="ironList"
                    grid
                    scroll-target="document"
                    items="[[searchResults]]"
                    selection-enabled>
                <template>
                    <ozone-item-preview
                            ozone-type-api-id="ozoneApiType"
                            item-id="[[item.id]]"
                            item-data="[[item]]"
                            class="resultListItem"
                            selected="[[selected]]"
                    ></ozone-item-preview>
                </template>
            </iron-list>
            <paper-item class="loader" hidden$="[[!dataRemain]]">Fetching new items...</paper-item>
            </div>
        <iron-scroll-threshold
                id="scrollTheshold"
                on-lower-threshold="toggleThreshold"
                scroll-target="document">
        </iron-scroll-threshold>
        </div>
    </template>
    <script src="ozone-mosaic.js"></script>
</dom-module>
</body>